<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Comunidad Powerlifting - Preguntas y debates</title>
  <script src="https://cdn.tailwindcss.com"></script>
  
  <!-- Firebase SDK -->
  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/9.23.0/firebase-app.js";
    import { getFirestore, collection, getDocs, addDoc, query, where } from "https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore.js";
    import { getAuth, createUserWithEmailAndPassword, signInWithEmailAndPassword, onAuthStateChanged, signOut } from "https://www.gstatic.com/firebasejs/9.23.0/firebase-auth.js";

    const firebaseConfig = {
      apiKey: "AIzaSyAHwg5fSQNvDzhxOeRiOXUqKb2Y52JTxFs",
      authDomain: "sergiopowercoach-foro.firebaseapp.com",
      projectId: "sergiopowercoach-foro",
      storageBucket: "sergiopowercoach-foro.appspot.com",
      messagingSenderId: "571520460029",
      appId: "1:571520460029:web:2c942e15addfe92d164a94",
      measurementId: "G-18K2P3CEZS"
    };
    const app = initializeApp(firebaseConfig);
    const db = getFirestore(app);
    const auth = getAuth(app);

    function checkAccess() {
      const msg = document.getElementById('access-message');
      msg.textContent = 'Comprobando acceso...';
      const userLocal = localStorage.getItem('usuarioForo');
      onAuthStateChanged(auth, (user) => {
        if (!userLocal && !user) {
          msg.textContent = 'Redirigiendo a login...';
          setTimeout(() => {
            window.location.href = 'login.html';
          }, 800);
          return;
        }
        msg.textContent = '';
      });
    }
    checkAccess();
  </script>

</body>
</html>
